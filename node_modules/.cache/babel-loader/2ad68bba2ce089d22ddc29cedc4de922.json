{"ast":null,"code":"import \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport axios from 'axios';\nimport qs from 'querystring';\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\nconst instance = axios.create({\n  timeout: 4000 //配置超时时间\n\n}); //请求拦截器\n\ninstance.interceptors.request.use(config => {\n  //进度条开始\n  NProgress.start();\n  const {\n    method,\n    data\n  } = config;\n\n  if (method.toLowerCase() === 'post') {\n    //若传过来的参数是对象，则转换成urlencoded形式\n    if (data instanceof Object) {\n      config.data = qs.stringify(data);\n    }\n  }\n\n  return config;\n}); //响应拦截器\n\ninstance.interceptors.response.use(response => {\n  //进度条结束\n  console.log(response);\n  NProgress.done(); //若请求成功，返回数据\n\n  return response.data;\n}, error => {\n  //进度条结束\n  NProgress.done();\n\n  if (error.response.status === 401) {\n    _message.error('身份校验失败，请重新登录', 1);\n  } else {\n    //请求若失败，提示错误（这里可以处理所有请求的异常）\n    _message.error(error.message, 1); //中断Promise链\n\n\n    return new Promise(() => {});\n  }\n});\nexport default instance;","map":{"version":3,"sources":["C:/Users/SHYA/Desktop/blog/src/api/ajax.js"],"names":["axios","qs","NProgress","instance","create","timeout","interceptors","request","use","config","start","method","data","toLowerCase","Object","stringify","response","console","log","done","error","status","message","Promise"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,aAAf;AACA,OAAOC,SAAP,MAAsB,WAAtB;AAEA,OAAO,yBAAP;AAEA,MAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC1BC,EAAAA,OAAO,EAAE,IADiB,CACX;;AADW,CAAb,CAAjB,C,CAIA;;AACAF,QAAQ,CAACG,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAmCC,MAAD,IAAY;AAC1C;AACAP,EAAAA,SAAS,CAACQ,KAAV;AAEA,QAAM;AAACC,IAAAA,MAAD;AAAQC,IAAAA;AAAR,MAAgBH,MAAtB;;AACA,MAAIE,MAAM,CAACE,WAAP,OAAyB,MAA7B,EAAqC;AACjC;AACA,QAAGD,IAAI,YAAYE,MAAnB,EAA0B;AACtBL,MAAAA,MAAM,CAACG,IAAP,GAAcX,EAAE,CAACc,SAAH,CAAaH,IAAb,CAAd;AACH;AACJ;;AACD,SAAOH,MAAP;AACH,CAZD,E,CAcA;;AACAN,QAAQ,CAACG,YAAT,CAAsBU,QAAtB,CAA+BR,GAA/B,CAEKQ,QAAD,IAAc;AACV;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAd,EAAAA,SAAS,CAACiB,IAAV,GAHU,CAIV;;AAEA,SAAOH,QAAQ,CAACJ,IAAhB;AACH,CATL,EAUKQ,KAAD,IAAW;AACP;AACAlB,EAAAA,SAAS,CAACiB,IAAV;;AACA,MAAGC,KAAK,CAACJ,QAAN,CAAeK,MAAf,KAA0B,GAA7B,EAAiC;AAC7B,aAAQD,KAAR,CAAc,cAAd,EAA6B,CAA7B;AACH,GAFD,MAEK;AACD;AACA,aAAQA,KAAR,CAAcA,KAAK,CAACE,OAApB,EAA4B,CAA5B,EAFC,CAGD;;;AACA,WAAO,IAAIC,OAAJ,CAAY,MAAM,CAAE,CAApB,CAAP;AACH;AACJ,CArBL;AAuBA,eAAepB,QAAf","sourcesContent":["import axios from 'axios'\r\nimport qs from 'querystring'\r\nimport NProgress from 'nprogress'\r\nimport {message} from 'antd'\r\nimport 'nprogress/nprogress.css'\r\n\r\nconst instance = axios.create({\r\n    timeout: 4000, //配置超时时间\r\n})\r\n\r\n//请求拦截器\r\ninstance.interceptors.request.use((config) => {\r\n    //进度条开始\r\n    NProgress.start()\r\n\r\n    const {method,data} = config\r\n    if (method.toLowerCase() === 'post' ){\r\n        //若传过来的参数是对象，则转换成urlencoded形式\r\n        if(data instanceof Object){\r\n            config.data = qs.stringify(data)\r\n        }\r\n    }\r\n    return config\r\n})\r\n\r\n//响应拦截器\r\ninstance.interceptors.response.use(\r\n    \r\n    (response) => {\r\n        //进度条结束\r\n        console.log(response)\r\n        NProgress.done()\r\n        //若请求成功，返回数据\r\n        \r\n        return response.data\r\n    },\r\n    (error) => {\r\n        //进度条结束\r\n        NProgress.done()\r\n        if(error.response.status === 401){\r\n            message.error('身份校验失败，请重新登录',1)\r\n        }else{\r\n            //请求若失败，提示错误（这里可以处理所有请求的异常）\r\n            message.error(error.message,1)\r\n            //中断Promise链\r\n            return new Promise(() => {})\r\n        }\r\n    }\r\n)\r\nexport default instance"]},"metadata":{},"sourceType":"module"}